<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0 minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>JIWON MOON</title>
    <link rel="shortcut icon" href="../images/common/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700;800;900&family=Rubik+Maze&family=Silkscreen:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/splitting.css" />
    <link rel="stylesheet" href="css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/main.css" />

    <script src="js/jquery-3.6.0.min.js"></script>
    <!-- <script src="js/aos.js"></script> -->
    <script src="js/splitting.min.js"></script>
    <script src="js/swiper-bundle.min.js"></script>
    <script src="js/greensock/gsap.min.js"></script>
    <script src="js/greensock/CSSRulePlugin.min.js"></script>
    <script src="js/greensock/ScrollTrigger.min.js"></script>
    <script src="js/js.cookie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
      (function () {
        // https://dashboard.emailjs.com/admin/account
        emailjs.init('EiGPZs9L2i3EqKQTw');
      })();
    </script>
  </head>
  <body>
    <main id="main">
      <div id="header">
        <div id="mainTitle">Fly me to the Moon</div>
        <ul class="menu">
          <li><a href="#home">Home</a></li>
          <li><a href="#project">Projects</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
      <div id="email">
        <form id="contact-form">
          <input type="hidden" name="contact_number" />
          <label>Name *</label>
          <input type="name" name="from_name" />
          <label>Email *</label>
          <input type="email" name="reply_to" />
          <label>Message *</label>
          <textarea name="message"></textarea>
          <div class="btns">
            <input type="submit" value="Send" id="btnSend" />
            <input type="button" value="Close" id="btnClose" />
          </div>
        </form>
      </div>
      <div id="cover"></div>
      <div id="container">
        <section class="section" id="home">
          <div id="controlPanel">
            <div class="stack">
              <div class="marquee">
                <span>
                  <img src="images/html.png" alt="" />
                  <img src="images/css.png" alt="" />
                  <img src="images/sass.png" alt="" />
                  <img src="images/js.png" alt="" />
                  <img src="images/jquery.png" alt="" />
                  <img src="images/node.png" alt="" />
                  <img src="images/react.png" alt="" />
                  <img src="images/redux.png" alt="" />
                </span>
              </div>
            </div>
            <div class="profile">
              <div class="infoBox">
                <div id="screen">
                  <span id="typed"></span>
                </div>
                <div class="rightBar">
                  <span class="material-symbols-outlined" id="homeBtn"> home </span>
                  <span class="material-symbols-outlined" id="helpBtn"> help </span>
                  <span class="material-symbols-outlined" id="rocketBtn"> rocket_launch </span>
                </div>
              </div>
              <div class="inputBox">
                <div class="label">Input</div>
                <input type="text" id="command" />
              </div>
              <div class="terminal">
                <ul class="list"></ul>
              </div>
            </div>
          </div>
        </section>
        <section class="section" id="project">
          <ul></ul>
          <div class="scrollTop">Scroll To Top</div>
        </section>
        <section class="section" id="contact">
          <ul class="contactList">
            <li><a href="https://github.com/jwzzang12" target="_blank">Github</a></li>
            <li><a href="https://www.linkedin.com/in/fly-me-to-the-moon-jw/" target="_blank">LinkedIn</a></li>
            <li id="cv">
              <a href="https://docs.google.com/document/d/1Gduypa5aUUqI5tIdTxdZO0ms0cBpSmjBPLaI7wdTNuc/edit?usp=sharing" target="_blank">CV</a>
            </li>
            <li id="btnEmail">E-mail</li>
          </ul>
          <div class="dolphins">
            <div class="dolphin left"><img src="images/dolphinL.png" alt="" /></div>
            <div class="dolphin right"><img src="images/dolphinR.png" alt="" /></div>
          </div>
        </section>
      </div>
      <footer id="footer"><div class="copyright">© 2023 JW.MOON All rights reserved.</div></footer>
      <canvas id="canvas"> </canvas>
      <script>
        const canvas = document.querySelector('#canvas');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        window.addEventListener('resize', function () {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });
        const ctx = canvas.getContext('2d');

        class Star {
          x = 0;
          y = 0;
          velocity = 0;
          size = 0;
          t = 0;
          constructor(_x, _y, _velocity) {
            this.x = _x;
            this.loadX = this.x;
            this.y = _y;
            this.velocity = _velocity;
            this.size = Math.random() * 3 + 1;
          }
          draw() {
            ctx.fillStyle = 'rgba(255,255,255,1)';
            ctx.beginPath();
            ctx.fillRect(this.x, this.y, this.size, this.size);
            ctx.fill();
          }
          fall() {
            if (this.y > canvas.height) {
              this.y = -20;
              this.x = Math.random() * canvas.width;
              this.velocity = Math.random() + 0.2;
            }
            this.y = this.y + this.velocity;
            this.x = this.loadX + Math.sin(this.t);
            this.draw();
          }
        }
        const stars = [];
        for (let i = 0; i < 100; i++) {
          const star = new Star(i * 20, Math.random() * 800, Math.random() + 0.2, Math.random() * 2 + 1);
          stars.push(star);
        }

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          stars.forEach(function (item, idx) {
            item.fall();
          });
          window.requestAnimationFrame(animate);
        }
        animate();
      </script>
    </main>

    <script type="text/javascript">
      //email
      window.onload = function () {
        document.getElementById('contact-form').addEventListener('submit', function (event) {
          event.preventDefault();
          this.contact_number.value = (Math.random() * 100000) | 0;
          emailjs.sendForm('service_moon', 'template_f6bcrdh', this).then(
            function () {
              console.log('SUCCESS!');
            },
            function (error) {
              console.log('FAILED...', error);
            }
          );
        });
      };

      //menu
      const menu = $('.menu li');
      const section = $('#container section');
      menu.on('click', function () {
        const idx = $(this).index();
        $(this).addClass('on').siblings().removeClass('on');
        section.eq(idx).css('display', 'flex').siblings().hide();
        return false;
      });
      menu.eq(0).trigger('click');
      //stack
      function makeMarquee(item, duration) {
        const stack = $('.stack .marquee');
        const copy = stack.find('span').clone();
        stack.append(copy);
        function move() {
          const y = stack.height();
          gsap.set(stack, { y: 0 });
          gsap.to(stack, {
            y: '-130%',
            duration: duration,
            ease: 'linear',
            onComplete: function () {
              move();
            },
          });
        }
        move();
      }
      makeMarquee('.stack', 15);
      //rightBar
      $('#homeBtn').on('click', function () {
        const typed = new Typed('#typed', option);
      });
      $('#helpBtn').on('click', function () {
        const commands = {
          strings: ['', 'Commands<br>> projects<br>> contact<br>> email<br>> github<br><br>...and what else?'],
          stringsElement: null,
          typeSpeed: 40,
          showCursor: false,
        };
        const help = new Typed('#typed', commands);
      });
      $('#rocketBtn').on('click', function () {
        const error = {
          strings: ['', 'Sorry. This function is currently not available.'],
          stringsElement: null,
          typeSpeed: 40,
          showCursor: false,
        };
        const message = new Typed('#typed', error);
      });

      //screen
      const option = {
        strings: [
          '',
          'Hello. <br> I’m Jiwon, Junior FE developer.<br>Thanks for visiting my portfolio website.<br>Please press buttons or enter commands to start a voyage.<br> > help',
        ],
        stringsElement: null,
        typeSpeed: 40,
        showCursor: false,
        onComplete: (self) => {
          $('#screen').addClass('on');
        },
      };
      const typed = new Typed('#typed', option);

      //input
      $('#command').on('keyup', function (e) {
        const command = $('#command').val().toLowerCase();
        if (e.keyCode === 13) {
          e.preventDefault();
          if (command === '') {
            $('.terminal .list').append(`<li class="me"> please enter the command</li>`);
          } else if (command === 'help') {
            $('.terminal .list').append(`<li> > ${command}</li>`);
            $('#typed').html('');
            const commands = {
              strings: ['', 'Commands<br>> projects<br>> contact<br>> email<br>> github<br><br>...and what else?'],
              stringsElement: null,
              typeSpeed: 40,
              showCursor: false,
            };
            const help = new Typed('#typed', commands);
          } else if (command === 'hi' || command === 'hello') {
            $('.terminal .list').append(`<li> > ${command}</li><li class="me">Hi there, good to meet you</li>`);
          } else if (command === 'home') {
            $('#typed').html('');
            $('.terminal .list').append(`<li> > ${command}</li><li class="me">You're already at the home section</li>`);
            const typed = new Typed('#typed', option);
          } else if (command === 'projects') {
            $('.terminal .list').append(`<li> > ${command}</li>`);
            menu.eq(1).trigger('click');
          } else if (command === 'project') {
            $('.terminal .list').append(`<li> > ${command}</li><li class="me">You mean 'projects'?</li>`);
          } else if (command === 'contact') {
            $('.terminal .list').append(`<li> > ${command}</li>`);
            menu.eq(2).trigger('click');
          } else if (command === 'email') {
            gsap.to('#email', { display: 'block', x: '-50%', y: '-50%', duration: 1, ease: 'power4' });
            gsap.to('#cover', { display: 'block', duration: 1, ease: 'power4' });
          } else if (command === 'github') {
            $('.terminal .list').append(`<li> > ${command}</li>`);
            window.open(`https://github.com/jwzzang12`, 'mywindow', 'status=1,toolbar=1');
          }
          // else if (command === "start") {
          //   $(".terminal .list").append(`<li> > ${command}</li><li class="me">Starting voyage <span id="loading"></span></li>`);
          //   let count = 0;
          //   const loading = setInterval(() => {
          //     $("#loading").append(`#`);
          //     count += 1;
          //     if (count == 10) {
          //       clearInterval(loading);
          //     }
          //   }, 300);
          // }
          else {
            $('.terminal .list').append(`<li> > ${command}</li>`);
          }
          $('#command').val('').focus();
          $('.terminal').scrollTop($('.terminal .list').height());
          return;
        }
      });

      //section project
      $.ajax({ url: 'data/pjt.json ' })
        .done(function (res) {
          const items = res.items;
          let tempHtml = '';
          let tempTag = '';
          $.each(items, function (idx, item) {
            tempHtml += `            <li class="contents" >
              <div class="titleBox">
                <div class="prjTitle">
                  ${item.title}
                  <div class="linkBox">
                  <a href="${item.github}" target="_blank">
                    <img class="linkIcon" src="images/github.png" alt="github"/>
                  </a>
                  <a href="${item.link}" target="_blank">
                    <img class="linkIcon" src="images/link.png" alt="website"/>
                  </a>
                </div>  
                </div>

              </div>
              <div class="desc">${item.desc}</div>
              <div class="tags">
                <ul>
                  ${item.stack}
                </ul>
              </div>
            </li>`;
            $('#project ul').html(tempHtml);
          });
        })
        .fail(function (error) {
          console.log(error);
        });

      $('.scrollTop').on('click', function () {
        $('html, body').animate({ scrollTop: 0 }, 'slow');
        return false;
      });

      //section contact
      $('#btnEmail').on('click', function () {
        gsap.to('#email', { display: 'block', x: '-50%', y: '-50%', duration: 1, ease: 'power4' });
        gsap.to('#cover', { display: 'block', duration: 1, ease: 'power4' });
      });
      $('#btnClose').on('click', function () {
        gsap.to('#email', { display: 'none', x: '-50%', y: '130%', duration: 0.3, ease: 'power4' });
        gsap.to('#cover', { display: 'none', duration: 0.3, ease: 'power4' });
      });
    </script>
  </body>
</html>
